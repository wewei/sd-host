#!/bin/bash
# SD-Host CLI Tool - Unix/Linux/macOS Launcher
# This script allows you to run 'sdh' from anywhere on Unix-like systems

# Get the directory where this script is located (bin/)
BIN_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Go to parent directory (project root)
PROJECT_ROOT="$(dirname "$BIN_DIR")"

# Set environment variables
export PYTHONPATH="$PROJECT_ROOT"

# Determine Python executable based on availability
VENV_PYTHON="$PROJECT_ROOT/venv/bin/python"

# Check for Python executable in order of preference
if [ -f "$VENV_PYTHON" ]; then
    PYTHON_EXE="$VENV_PYTHON"
elif command -v python3 > /dev/null 2>&1; then
    PYTHON_EXE="python3"
elif command -v python > /dev/null 2>&1; then
    PYTHON_EXE="python"
else
    echo "❌ Error: Python not found. Please install Python or create a virtual environment."
    exit 1
fi

# Build CLI script path
CLI_SCRIPT="$PROJECT_ROOT/src/cli/sdh.py"

# Check if CLI script exists
if [ ! -f "$CLI_SCRIPT" ]; then
    echo "❌ Error: CLI script not found at: $CLI_SCRIPT"
    exit 1
fi

# Execute the CLI with all arguments
"$PYTHON_EXE" "$CLI_SCRIPT" "$@"
